"use strict";jQuery(document).ready(function(e){var n=e(".dfn-post-count").val();var r=-20;var p=0;var j=0;var f=0;var b=1;var c=e(".dfn-existing-definitions").val().split(",");e(document).on("keyup",'input[name="newtag[definitions_title]"]',h);function h(){var A=e('input[name="newtag[definitions_title]"]').val();if(A.length==0){var v='<div class="dfn-icon-bullet-invisible"></div><span class="dfn-comment">Add a term to see results</span>';e(".dfn-definition-add-notice").html(v);return}if(A.indexOf(",")>=0){var z=A.split(",")}else{var z=[A]}var y=[];for(let i=0;i<z.length;i++){var w=e.trim(z[i]);if(e.inArray(w,c)!==-1){y.push(w)}}if(y.length>0){y=y.join(", ");e('input[name="dfn-definition-add"]').prop("disabled",true);if(y.indexOf(",")>=0){var x=" are already in use. Choose another"}else{var x=" is already in use. Choose another"}var v='<div class="dfn-icon-bullet-red"></div><span class="dfn-comment">'+y+x+"</span>";e(".dfn-definition-add-notice").html(v)}else{e('input[name="dfn-definition-add"]').prop("disabled",false);if(A.indexOf(",")>=0){var x=" are not used before!"}else{var x=" has not been used before!"}var v='<div class="dfn-icon-bullet-green"></div><span class="dfn-comment">'+A+x+"</span>";e(".dfn-definition-add-notice").html(v)}}d();t();e(document).on("click",'input[name="dfn-definition-add"]',t);e(document).on("click",'span[class="remove-tag-icon"]',t);e(document).on("click",'input[name="dfn-definition-add"]',g);e(document).on("click",'span[class="remove-tag-icon"]',u);e(document).on("click",'input[name="dfn-definition-add"]',h);e(document).on("click",'span[class="remove-tag-icon"]',h);k();function k(){if(s().length==0){e('input[class="dfn-enable"]').prop("disabled",true)}else{e('input[class="dfn-enable"]').prop("disabled",false)}}function g(){var v=s().pop();c.push(v);k()}function u(){var v=e(this).next().html().split(" ").pop();c=c.filter(function(w){return w!=v});k()}function t(){var v=s();e.ajax({type:"GET",url:wpdef.url,dataType:"json",data:({action:"wpdef_scan_definition_count",definitions:v}),success:function(w){if(w.success){j=w.count;a()}}})}function a(){if(p==j){return}r=-40;f=(j-p)/80;q()}function m(v){return 0.1*v*v+v+1}function q(){if(r!=40){r++;p+=f;if(b!=l(Math.round(p),n)){d();setTimeout(q,m(r))}else{e(".dfn-definition-count").html(Math.round(p));setTimeout(q,m(r))}}else{if(b!=l(Math.round(p),n)){p=j;d()}else{e(".dfn-definition-count").val(j);p=j}}}function d(){var v=o(p);e(".dfn-performance-notice").html(v)}function o(v){v=Math.round(v);var w=l(v,n);var z="";var A="<span class='dfn-definition-count-notice'><span class='dfn-definition-count'>"+v+"</span> terms in "+n+" posts<span>";var y="";if(w==3){z="<div class='dfn-icon-bullet-red'></div>";y="<span class='dfn-comment'>There are too many terms per post. This might affect resources. Try to be more specific. <a>Read more</a><span>"}if(w==2){z="<div class='dfn-icon-bullet-orange'></div>";y="<span class='dfn-comment'>There might too many terms per post. This might affect resources. Try to be more specific. <a>Read more</a><span>"}if(w==1){z="<div class='dfn-icon-bullet-green'></div>";y="<span class='dfn-comment'></span>"}var x="";x+="<div class='dfn-field'>";x+=z;x+=A;x+="</div>";x+=y;x+="<input type='hidden' class='dfn-definition-ids' value='"+v+"'>";return x}function l(v,w){if(v/w>3){return 3}if(v/w>2){return 2}return 1}function s(){var v=[];e(".dfn-post-definition-list li").each(function(){v.push(e(this).html().split("&nbsp;").pop())});return v}});