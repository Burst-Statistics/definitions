"use strict";!function(o){window.wpdef_metabox={init:function(){o(".block-editor__container").length&&window.tagBox&&window.tagBox.init(),wpdef_metabox.post_count=wpdef.post_count,wpdef_metabox.existing_definitions=wpdef.existing_definitions,wpdef_metabox.animation_time=-40,wpdef_metabox.animation_time_begin=-20,wpdef_metabox.animation_time_end=20,wpdef_metabox.definition_count_current=0,wpdef_metabox.definition_count_new=0,wpdef_metabox.step=0,wpdef_metabox.performance_level=1,wpdef_metabox.set_enable_checkbox_state(),wpdef_metabox.set_add_tag_state(),wpdef_metabox.conditionally_show_use_image(),o(document).on("click",'input[name="dfn-definition-add"]',wpdef_metabox.add_definition_to_all_list),o(document).on("click",'span[class="remove-tag-icon"]',wpdef_metabox.remove_definition_from_all_list),o(document).on("click",'input[name="dfn-definition-add"]',wpdef_metabox.set_add_definition_state),o(document).on("click",'span[class="remove-tag-icon"]',wpdef_metabox.set_add_definition_state),o(document).on("keyup",'input[name="newtag[definitions_title]"]',wpdef_metabox.set_add_definition_state),o(document).on("change",'input[type="checkbox"][name="dfn-use-tooltip"]',wpdef_metabox.conditionally_show_use_image)},set_add_definition_state:function(){wpdef_metabox.set_add_tag_state();var e,i,t=o('input[name="newtag[definitions_title]"]').val();0!=t.length&&(e=t.split(","),0<(e=wpdef_metabox.get_existing_definitions_from_list(e)).length?(i='<div class="dfn-icon-bullet-red"></div><span class="dfn-comment">'+(1<e.length?(e=e.join(", "),wpdef_metabox.localize_string("already-in-use-plural").replace("{definitions}",e)):wpdef_metabox.localize_string("already-in-use-single").replace("{definitions}",e))+"</span>",o(".dfn-definition-add-notice").html(i),o('input[name="dfn-definition-add"]').prop("disabled",!0)):(i='<div class="dfn-icon-bullet-green"></div><span class="dfn-comment">'+(0<=t.indexOf(",")?wpdef_metabox.localize_string("not-in-use-plural"):wpdef_metabox.localize_string("not-in-use-single")).replace("{definitions}",t)+"</span>",o(".dfn-definition-add-notice").html(i),o('input[name="dfn-definition-add"]').prop("disabled",!1)))},get_existing_definitions_from_list:function(i){var t=[];for(let e=0;e<i.length;e++){var n=o.trim(i[e]);-1!==o.inArray(n,wpdef_metabox.existing_definitions)&&t.push(n)}return t},set_enable_checkbox_state:function(){0==wpdef_metabox.get_post_definitions_list().length?o('input[class="dfn-disable"]').prop("disabled",!0):o('input[class="dfn-disable"]').prop("disabled",!1)},set_add_tag_state:function(){var e;0<wpdef_metabox.get_post_definitions_list().length?(o(".dfn-definition-add-notice").hide(),o('input[name="dfn-definition-add"]').closest(".ajaxtag").hide()):(e='<div class="dfn-icon-bullet-invisible"></div><span class="dfn-comment">'+wpdef_metabox.localize_string("add-term")+"</span>",o(".dfn-definition-add-notice").html(e).show(),o('input[name="dfn-definition-add"]').closest(".ajaxtag").show())},get_post_definitions_list:function(){var e=[];return o(".dfn-post-definition-list li").each(function(){e.push(o(this).html().split("&nbsp;").pop())}),e},localize_string:function(e){return wpdef.strings.hasOwnProperty(e)?wpdef.strings[e]:""},add_definition_to_all_list:function(){var e=wpdef_metabox.get_post_definitions_list().pop();wpdef_metabox.existing_definitions.push(e),wpdef_metabox.set_enable_checkbox_state()},remove_definition_from_all_list:function(){var i=o(this).next().html().split(" ").pop();wpdef_metabox.existing_definitions=wpdef_metabox.existing_definitions.filter(function(e){return e!=i}),wpdef_metabox.set_enable_checkbox_state()},anitation_time_to_wait:function(e){return.1*e*e+e+1},conditionally_show_use_image:function(){o('input[type="checkbox"][name="dfn-use-tooltip"]')[0].checked?o(".dfn-disable-image").closest(".dfn-field").show():o(".dfn-disable-image").closest(".dfn-field").hide()}}}(jQuery),jQuery(document).ready(function(e){window.wpdef_metabox.init()});